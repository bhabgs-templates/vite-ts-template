!function(L){"use strict";var w="ht",H=L[w],I=Math,r=I.max,T=I.min,t=I.abs,j=I.atan2,Q=(I.cos,I.sin,I.ceil),U=H.Default,E=U.getInternal(),b=H.List,y=E.Mat,f=E.getNodeRect,R=E.intersectionLineRect,K=U.getDistance,V=U.setEdgeType,Y="left",Z="right",g="top",N="bottom",W="edge.type",B="edge.gap",F="edge.center",J="edge.extend",c=function(L,h){return f(L,h).width},D=function(S,G){return f(S,G).height},$=function(r,g){return E.getEdgeHostPosition(r,g,"source")},G=function(Z,k){return E.getEdgeHostPosition(Z,k,"target")},x=function(X,J){var n=X.s(W),L=X.getEdgeGroup();if(L){var D=0;if(L.eachSiblingEdge(function(u){J.isVisible(u)&&u.s(W)==n&&D++}),D>1)return X.s(B)*(D-1)/2}return 0},s=function(M,R){var O=M.s(W),P=M.isLooped();if(!M.getEdgeGroup())return P?M.s(B):0;var s,Z=0,e=0,h=0;return M.getEdgeGroup().getSiblings().each(function(m){m.each(function(p){if(p._40I===M._40I&&p.s(W)==O&&R.isVisible(p)){var I=p.s(B);s?(e+=h/2+I/2,h=I):(s=p,h=I),p===M&&(Z=e)}})}),P?e-Z+h:Z-e/2},O=function(S,K){var A=K.s("edge.corner.radius");return U.toRoundedCorner(S,A)};E.addMethod(H.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),V("boundary",function(H,O,Z,W){W||(O=-O);var X,Y=$(Z,H),A=G(Z,H),J=f(Z,H._40I),g=f(Z,H._41I),c=new y(j(A.y-Y.y,A.x-Y.x)),C=K(Y,A),D=Y.x,r=Y.y;return X=c.tf(0,O),Y={x:X.x+D,y:X.y+r},X=c.tf(C,O),A={x:X.x+D,y:X.y+r},X=R(Y,A,J),X&&(Y={x:X[0],y:X[1]}),X=R(Y,A,g),X&&(A={x:X[0],y:X[1]}),{points:new b([Y,A])}}),V("ripple",function(f,t,e,X){X||(t=-t);var A=$(e,f),V=G(e,f),D=K(A,V),H=T(f.s("edge.offset"),D/2),q=f.s("edge.ripple.size"),w=f.s("edge.ripple.length"),c=f.s("edge.ripple.both"),N=f.s(F),g=f.s("edge.ripple.elevation"),a=new b,P=f.s("edge.ripple.straight")?null:new b,o=new y(j(V.y-A.y,V.x-A.x));X||(g=-g),D-=2*H,w>0&&(q=Q(D/w));var W=D/q;P&&P.add(1);for(var m=0;q>m;m++)P&&P.add(3),0===m?a.add({x:H+W*m,y:N?0:t}):a.add({x:H+W*m,y:t}),a.add({x:H+W*m+W/2,y:g+t}),c&&(g=-g);for(a.add({x:H+D,y:N?0:t}),m=0;m<a.size();m++){var Y=o.tf(a.get(m));Y.x+=A.x,Y.y+=A.y,a.set(m,Y)}return{points:a,segments:P}}),V("h.v",function(o,z,B){z=s(o,B);var A=new b,q=o.s(F),a=$(B,o),p=a.x,E=a.y,L=G(B,o),w=L.x,r=L.y,f=o._40I instanceof H.Edge,N=o._41I instanceof H.Edge,d=0,P=0,I=w-p,k=r-E;return q||(d=f?0:c(B,o._40I)/2,P=N?0:D(B,o._41I)/2),I>=0&&0>=k?(A.add({x:p+d,y:E+z}),A.add({x:w+z,y:E+z}),A.add({x:w+z,y:r+P})):0>=I&&k>=0?(A.add({x:p-d,y:E+z}),A.add({x:w+z,y:E+z}),A.add({x:w+z,y:r-P})):I>=0&&k>=0?(A.add({x:p+d,y:E+z}),A.add({x:w-z,y:E+z}),A.add({x:w-z,y:r-P})):(A.add({x:p-d,y:E+z}),A.add({x:w-z,y:E+z}),A.add({x:w-z,y:r+P})),O(A,o)}),V("v.h",function(N,S,f){S=s(N,f);var a=new b,B=N.s(F),V=$(f,N),m=V.x,X=V.y,i=G(f,N),u=i.x,e=i.y,p=N._40I instanceof H.Edge,z=N._41I instanceof H.Edge,E=0,j=0,U=u-m,A=e-X;return B||(E=z?0:c(f,N._41I)/2,j=p?0:D(f,N._40I)/2),U>=0&&0>=A?(a.add({x:m+S,y:X-j}),a.add({x:m+S,y:e+S}),a.add({x:u-E,y:e+S})):0>=U&&A>=0?(a.add({x:m+S,y:X+j}),a.add({x:m+S,y:e+S}),a.add({x:u+E,y:e+S})):U>=0&&A>=0?(a.add({x:m-S,y:X+j}),a.add({x:m-S,y:e+S}),a.add({x:u-E,y:e+S})):(a.add({x:m-S,y:X-j}),a.add({x:m-S,y:e+S}),a.add({x:u+E,y:e+S})),O(a,N)}),V("ortho",function(k,X,J){var w=new b,I=k.s(F),R=k.s("edge.ortho"),K=k._40I,g=k._41I,i=$(J,k),a=i.x,Y=i.y,Q=G(J,k),r=Q.x,U=Q.y,p=r-a,P=U-Y,m=K instanceof H.Edge,s=g instanceof H.Edge,e=I||m?0:c(J,K)/2,V=I||m?0:D(J,K)/2,M=I||s?0:c(J,g)/2,z=I||s?0:D(J,g)/2,W=(p-(e+M)*(p>0?1:-1))*R,y=(P-(V+z)*(P>0?1:-1))*R;return t(p)<t(P)?p>=0&&0>=P?(w.add({x:a+X,y:Y-V}),w.add({x:a+X,y:Y+y+X-V}),w.add({x:r+X,y:Y+y+X-V}),w.add({x:r+X,y:U+z})):0>=p&&P>=0?(w.add({x:a+X,y:Y+V}),w.add({x:a+X,y:Y+y+X+V}),w.add({x:r+X,y:Y+y+X+V}),w.add({x:r+X,y:U-z})):p>=0&&P>=0?(w.add({x:a+X,y:Y+V}),w.add({x:a+X,y:Y+y-X+V}),w.add({x:r+X,y:Y+y-X+V}),w.add({x:r+X,y:U-z})):(w.add({x:a+X,y:Y-V}),w.add({x:a+X,y:Y+y-X-V}),w.add({x:r+X,y:Y+y-X-V}),w.add({x:r+X,y:U+z})):p>=0&&0>=P?(w.add({x:a+e,y:Y+X}),w.add({x:a+W+X+e,y:Y+X}),w.add({x:a+W+X+e,y:U+X}),w.add({x:r-M,y:U+X})):0>=p&&P>=0?(w.add({x:a-e,y:Y+X}),w.add({x:a+W+X-e,y:Y+X}),w.add({x:a+W+X-e,y:U+X}),w.add({x:r+M,y:U+X})):p>=0&&P>=0?(w.add({x:a+e,y:Y+X}),w.add({x:a+W-X+e,y:Y+X}),w.add({x:a+W-X+e,y:U+X}),w.add({x:r-M,y:U+X})):(w.add({x:a-e,y:Y+X}),w.add({x:a+W-X-e,y:Y+X}),w.add({x:a+W-X-e,y:U+X}),w.add({x:r+M,y:U+X})),O(w,k)}),V("flex",function(y,f,J){var L=new b,Z=y.s("edge.flex")+x(y,J),R=y.s(F),z=y._40I,o=y._41I,m=$(J,y),T=m.x,N=m.y,s=G(J,y),P=s.x,a=s.y,j=z instanceof H.Edge,U=o instanceof H.Edge,i=P-T,e=a-N,C=R||j?0:c(J,z)/2,V=R||j?0:D(J,z)/2,q=R||U?0:c(J,o)/2,n=R||U?0:D(J,o)/2,u=i>0?Z:-Z,A=e>0?Z:-Z;return t(i)<t(e)?i>=0&&0>=e?(L.add({x:T+f,y:N-V}),L.add({x:T+f,y:N+A+f-V}),L.add({x:P+f,y:a-A+f+n}),L.add({x:P+f,y:a+n})):0>=i&&e>=0?(L.add({x:T+f,y:N+V}),L.add({x:T+f,y:N+A+f+V}),L.add({x:P+f,y:a-A+f-n}),L.add({x:P+f,y:a-n})):i>=0&&e>=0?(L.add({x:T+f,y:N+V}),L.add({x:T+f,y:N+A-f+V}),L.add({x:P+f,y:a-A-f-n}),L.add({x:P+f,y:a-n})):(L.add({x:T+f,y:N-V}),L.add({x:T+f,y:N+A-f-V}),L.add({x:P+f,y:a-A-f+n}),L.add({x:P+f,y:a+n})):i>=0&&0>=e?(L.add({x:T+C,y:N+f}),L.add({x:T+u+f+C,y:N+f}),L.add({x:P-u+f-q,y:a+f}),L.add({x:P-q,y:a+f})):0>=i&&e>=0?(L.add({x:T-C,y:N+f}),L.add({x:T+u+f-C,y:N+f}),L.add({x:P-u+f+q,y:a+f}),L.add({x:P+q,y:a+f})):i>=0&&e>=0?(L.add({x:T+C,y:N+f}),L.add({x:T+u-f+C,y:N+f}),L.add({x:P-u-f-q,y:a+f}),L.add({x:P-q,y:a+f})):(L.add({x:T-C,y:N+f}),L.add({x:T+u-f-C,y:N+f}),L.add({x:P-u-f+q,y:a+f}),L.add({x:P+q,y:a+f})),O(L,y)}),V("extend.east",function(S,A,g){var W=new b,d=S.s(J)+x(S,g),P=S.s(F),n=$(g,S),s=S._40I instanceof H.Edge,k=S._41I instanceof H.Edge,q=n.x+(P||s?0:c(g,S._40I)/2),i=n.y,K=G(g,S),N=K.x+(P||k?0:c(g,S._41I)/2),t=K.y,h=r(q,N)+d;return i>t?(W.add({x:q,y:i+A}),W.add({x:h+A,y:i+A}),W.add({x:h+A,y:t-A}),W.add({x:N,y:t-A})):(W.add({x:q,y:i-A}),W.add({x:h+A,y:i-A}),W.add({x:h+A,y:t+A}),W.add({x:N,y:t+A})),O(W,S)}),V("extend.west",function(y,o,f){var e=new b,Q=y.s(J)+x(y,f),V=y.s(F),M=y._40I instanceof H.Edge,d=y._41I instanceof H.Edge,s=$(f,y),R=s.x-(V||M?0:c(f,y._40I)/2),u=s.y,w=G(f,y),S=w.x-(V||d?0:c(f,y._41I)/2),g=w.y,N=T(R,S)-Q;return u>g?(e.add({x:R,y:u+o}),e.add({x:N-o,y:u+o}),e.add({x:N-o,y:g-o}),e.add({x:S,y:g-o})):(e.add({x:R,y:u-o}),e.add({x:N-o,y:u-o}),e.add({x:N-o,y:g+o}),e.add({x:S,y:g+o})),O(e,y)}),V("extend.north",function(K,S,s){var W=new b,q=K.s(J)+x(K,s),d=K.s(F),f=K._40I instanceof H.Edge,g=K._41I instanceof H.Edge,R=$(s,K),Q=R.x,u=R.y-(d||f?0:D(s,K._40I)/2),c=G(s,K),N=c.x,i=c.y-(d||g?0:D(s,K._41I)/2),A=T(u,i)-q;return Q>N?(W.add({y:u,x:Q+S}),W.add({y:A-S,x:Q+S}),W.add({y:A-S,x:N-S}),W.add({y:i,x:N-S})):(W.add({y:u,x:Q-S}),W.add({y:A-S,x:Q-S}),W.add({y:A-S,x:N+S}),W.add({y:i,x:N+S})),O(W,K)}),V("extend.south",function(u,E,S){var e=new b,R=u.s(J)+x(u,S),p=u.s(F),h=u._40I instanceof H.Edge,k=u._41I instanceof H.Edge,_=$(S,u),q=_.x,y=_.y+(p||h?0:D(S,u._40I)/2),K=G(S,u),L=K.x,C=K.y+(p||k?0:D(S,u._41I)/2),Y=r(y,C)+R;return q>L?(e.add({y:y,x:q+E}),e.add({y:Y+E,x:q+E}),e.add({y:Y+E,x:L-E}),e.add({y:C,x:L-E})):(e.add({y:y,x:q-E}),e.add({y:Y+E,x:q-E}),e.add({y:Y+E,x:L+E}),e.add({y:C,x:L+E})),O(e,u)});var X=function(S,N,H,j,y){if(j.sort(function(h,e){var b=h.getSourceAgent()===N?h.getTargetAgent():h.getSourceAgent(),_=e.getSourceAgent()===N?e.getTargetAgent():e.getSourceAgent(),y=b.p(),L=_.p();if(H===Y||H===Z){if(y.y>L.y)return 1;if(y.y<L.y)return-1}else{if(y.x>L.x)return 1;if(y.x<L.x)return-1}return U.sortFunc(h.getId(),e.getId())}),y){for(var d,c,V,r=S.getSourceAgent(),z=S.getTargetAgent(),n=0;n<j.size();n++){var Q=j.get(n);Q.getSourceAgent()===r&&Q.getTargetAgent()===z||Q.getTargetAgent()===r&&Q.getSourceAgent()===z?(c||(c=new b),c.add(Q,0)):c?(V||(V=new b),V.add(Q)):(d||(d=new b),d.add(Q))}j.clear(),d&&j.addAll(d),c&&j.addAll(c),V&&j.addAll(V)}var R=j.indexOf(S),J=j.size(),h=S.s(B);return{side:H,index:R,size:J,offset:-h*(J-1)/2+h*R}},p=function(r,m,R,Q,B){var y=m.s(W);return X(m,R,Q,R.getAgentEdges().toList(function(N){return r.isVisible(N)&&N.s(W)===y}),B)},m=function(s,z){var B=s.getSourceAgent()===z?s.getTargetAgent():s.getSourceAgent(),K=z.p(),i=B.p(),$=i.x-K.x,S=i.y-K.y;return $>0&&t(S)<=$?Z:0>$&&t(S)<=-$?Y:S>0&&t($)<=S?N:g},S=function(u,h,l){var I=h.s(W),L=m(h,l);return X(h,l,L,l.getAgentEdges().toList(function(N){return u.isVisible(N)&&N.s(W)===I&&m(N,l)===L}))},z=function(o,j){var z=o.getSourceAgent()===j,c=z?o.getTargetAgent():o.getSourceAgent(),u=j.p(),m=c.p();return z?u.y>m.y?g:N:u.x<m.x?Z:Y},k=function(b,R,r){var u=R.s(W),B=z(R,r);return X(R,r,B,r.getAgentEdges().toList(function(R){return b.isVisible(R)&&R.s(W)===u&&z(R,r)===B}),B===Z||B===N)},d=function(b,B){var A=b.getSourceAgent()===B,U=A?b.getTargetAgent():b.getSourceAgent(),a=B.p(),X=U.p();return A?a.x<X.x?Z:Y:a.y>X.y?g:N},l=function(w,x,k){var c=x.s(W),p=d(x,k);return X(x,k,p,k.getAgentEdges().toList(function(G){return w.isVisible(G)&&G.s(W)===c&&d(G,k)===p}),p===Z||p===N)},C=function(Q,S,H){var r=Q.getSourceAgent(),j=Q.getTargetAgent(),K=r.getId()>j.getId(),y=K?j:r,t=K?r:j,I=y.p(),f=t.p(),l=H(S,Q,y),M=H(S,Q,t),$=Q.s(F),i=$?0:c(S,y)/2,A=$?0:c(S,t)/2,E=$?0:D(S,y)/2,w=$?0:D(S,t)/2,s=l.offset,B=M.offset,L=l.side,C=M.side,k=new b;return L===g?(k.add({x:I.x+s,y:I.y-E}),k.add({x:I.x+s,y:f.y+B}),C===Y?k.add({x:f.x-A,y:f.y+B}):k.add({x:f.x+A,y:f.y+B})):L===N?(k.add({x:I.x+s,y:I.y+E}),k.add({x:I.x+s,y:f.y+B}),C===Y?k.add({x:f.x-A,y:f.y+B}):k.add({x:f.x+A,y:f.y+B})):L===Y?(k.add({x:I.x-i,y:I.y+s}),k.add({x:f.x+B,y:I.y+s}),C===N?k.add({x:f.x+B,y:f.y+w}):k.add({x:f.x+B,y:f.y-w})):L===Z&&(k.add({x:I.x+i,y:I.y+s}),k.add({x:f.x+B,y:I.y+s}),C===N?k.add({x:f.x+B,y:f.y+w}):k.add({x:f.x+B,y:f.y-w})),K&&k.reverse(),O(k,Q)};V("ortho2",function(I,p,v){var K,V,x=I.s(F),M=I.s("edge.ortho"),d=I.getSourceAgent(),J=I.getTargetAgent(),E=d.getId()>J.getId(),z=E?J:d,G=E?d:J,t=z.p(),y=G.p(),k=S(v,I,z),s=S(v,I,G),U=x?0:c(v,z)/2,e=x?0:D(v,z)/2,H=x?0:c(v,G)/2,Q=x?0:D(v,G)/2,i=new b,j=k.offset,a=s.offset,P=k.side;return P===Z?(K=y.y>t.y?-j:j,V=t.x+U+(y.x-H-t.x-U)*M,i.add({x:t.x+U,y:t.y+j}),i.add({x:V+K,y:t.y+j}),i.add({x:V+K,y:y.y+a}),i.add({x:y.x-H,y:y.y+a})):P===Y?(K=y.y>t.y?-j:j,V=t.x-U-(t.x-U-y.x-H)*M,i.add({x:t.x-U,y:t.y+j}),i.add({x:V-K,y:t.y+j}),i.add({x:V-K,y:y.y+a}),i.add({x:y.x+H,y:y.y+a})):P===N?(K=y.x>t.x?-j:j,V=t.y+e+(y.y-Q-t.y-e)*M,i.add({x:t.x+j,y:t.y+e}),i.add({x:t.x+j,y:V+K}),i.add({x:y.x+a,y:V+K}),i.add({x:y.x+a,y:y.y-Q})):P===g&&(K=y.x>t.x?-j:j,V=t.y-e-(t.y-e-y.y-Q)*M,i.add({x:t.x+j,y:t.y-e}),i.add({x:t.x+j,y:V-K}),i.add({x:y.x+a,y:V-K}),i.add({x:y.x+a,y:y.y+Q})),E&&i.reverse(),O(i,I)},!0),V("flex2",function(L,$,r){var I,Q=L.getSourceAgent(),M=L.getTargetAgent(),C=Q.getId()>M.getId(),d=C?M:Q,v=C?Q:M,U=d.p(),z=v.p(),u=S(r,L,d),x=S(r,L,v),l=L.s(F),H=L.s("edge.flex")+(u.size-1)/2*L.s(B),P=l?0:c(r,d)/2,W=l?0:D(r,d)/2,X=l?0:c(r,v)/2,p=l?0:D(r,v)/2,K=new b,y=u.offset,A=x.offset,_=u.side;return _===Z?(I=z.y>U.y?-y:y,K.add({x:U.x+P,y:U.y+y}),K.add({x:U.x+P+H+I,y:U.y+y}),K.add({x:z.x-X-H+I,y:z.y+A}),K.add({x:z.x-X,y:z.y+A})):_===Y?(I=z.y>U.y?-y:y,K.add({x:U.x-P,y:U.y+y}),K.add({x:U.x-P-H-I,y:U.y+y}),K.add({x:z.x+X+H-I,y:z.y+A}),K.add({x:z.x+X,y:z.y+A})):_===N?(I=z.x>U.x?-y:y,K.add({x:U.x+y,y:U.y+W}),K.add({x:U.x+y,y:U.y+W+H+I}),K.add({x:z.x+A,y:z.y-p-H+I}),K.add({x:z.x+A,y:z.y-p})):_===g&&(I=z.x>U.x?-y:y,K.add({x:U.x+y,y:U.y-W}),K.add({x:U.x+y,y:U.y-W-H-I}),K.add({x:z.x+A,y:z.y+p+H-I}),K.add({x:z.x+A,y:z.y+p})),C&&K.reverse(),O(K,L)},!0),V("extend.north2",function(K,P,y){var L=K.getSourceAgent(),c=K.getTargetAgent(),M=L.getId()>c.getId(),R=M?c:L,j=M?L:c,k=R.p(),A=j.p(),I=p(y,K,R,g),C=p(y,K,j,g,!0),W=K.s(F),f=W?0:D(y,R)/2,Y=W?0:D(y,j)/2,i=I.offset,U=C.offset,Z=K.s(J)+(I.size-1)/2*K.s(B),E=T(k.y-f,A.y-Y)-Z+(k.x<A.x?i:-i),Q=new b;return Q.add({x:k.x+i,y:k.y-f}),Q.add({x:k.x+i,y:E}),Q.add({x:A.x+U,y:E}),Q.add({x:A.x+U,y:A.y-Y}),M&&Q.reverse(),O(Q,K)},!0),V("extend.south2",function(w,Z,v){var m=w.getSourceAgent(),Q=w.getTargetAgent(),i=m.getId()>Q.getId(),e=i?Q:m,V=i?m:Q,P=e.p(),l=V.p(),S=p(v,w,e,N),x=p(v,w,V,N,!0),W=w.s(F),z=W?0:D(v,e)/2,s=W?0:D(v,V)/2,$=S.offset,h=x.offset,j=w.s(J)+(S.size-1)/2*w.s(B),n=r(P.y+z,l.y+s)+j+(P.x>l.x?$:-$),X=new b;return X.add({x:P.x+$,y:P.y+z}),X.add({x:P.x+$,y:n}),X.add({x:l.x+h,y:n}),X.add({x:l.x+h,y:l.y+s}),i&&X.reverse(),O(X,w)},!0),V("extend.west2",function(k,Y,s){var x=k.getSourceAgent(),S=k.getTargetAgent(),P=x.getId()>S.getId(),L=P?S:x,e=P?x:S,V=L.p(),i=e.p(),$=p(s,k,L,g),H=p(s,k,e,g,!0),I=k.s(F),X=I?0:c(s,L)/2,w=I?0:c(s,e)/2,t=$.offset,y=H.offset,D=k.s(J)+($.size-1)/2*k.s(B),j=T(V.x-X,i.x-w)-D+(V.y<i.y?t:-t),N=new b;return N.add({x:V.x-X,y:V.y+t}),N.add({x:j,y:V.y+t}),N.add({x:j,y:i.y+y}),N.add({x:i.x-w,y:i.y+y}),P&&N.reverse(),O(N,k)},!0),V("extend.east2",function(S,Q,U){var x=S.getSourceAgent(),M=S.getTargetAgent(),K=x.getId()>M.getId(),I=K?M:x,a=K?x:M,l=I.p(),L=a.p(),f=p(U,S,I,g),Z=p(U,S,a,g,!0),z=S.s(F),D=z?0:c(U,I)/2,j=z?0:c(U,a)/2,y=f.offset,W=Z.offset,X=S.s(J)+(f.size-1)/2*S.s(B),h=r(l.x+D,L.x+j)+X+(l.y>L.y?y:-y),v=new b;return v.add({x:l.x+D,y:l.y+y}),v.add({x:h,y:l.y+y}),v.add({x:h,y:L.y+W}),v.add({x:L.x+j,y:L.y+W}),K&&v.reverse(),O(v,S)},!0),V("v.h2",function(z,v,F){return C(z,F,k)},!0),V("h.v2",function(M,Q,t){return C(M,t,l)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);